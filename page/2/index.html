<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 2 | Hexo</title>

  
  <meta name="author" content="fld">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="Hexo"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Hexo</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  

<article>

  
    
    <h3 class="article-title"><a href="/2014/02/28/2014-02-28-java-spring-errors/"><span>Java项目中出现的各种错误的解决办法</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/28/2014-02-28-java-spring-errors/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-27T16:00:00.000Z">
          2014-02-28
        </time>
      </a>
    </span>
  </div>


  <!-- 

  <div class="article-content">
    <div class="entry">
      
        <p>环境：Tomcat6.0</p>
<p>######告警：INFO: validateJarFile(servlet-api.jar) - jar not loaded See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class</p>
<p>解决：把/WEB-INF/lib/下的servlet-api.jar删除掉，Tomcat里面已经包含了servlet-api.jar了，重复。</p>
<p>环境：Hibernate 3.x</p>
<p>######错误：Caused by: java.lang.NoClassDefFoundError: org/hibernate/annotations/Entity</p>
<p>解决：在Hibernate3.5以下，使用注解还需要添加hibernate-annotations-3.3.0.jar，hibernate-commons-annotations.jar和ejb3-persistence.jar等，Hibernate3.5版本已经包含了JPA相关的jar，所以直接导入hibernate3（3.5）.jar即可</p>
<p>环境：Spring3.0.5 tiles2.2.1</p>
<p>######错误：Caused by: java.lang.ClassNotFoundException: org.apache.tiles.startup.BasicTilesInitializer</p>
<p>解决：原因是tiles-core2.2.1中该类BasicTilesInitializer已经deprecated了<br>使用如下配置：</p>
<pre><code>&lt;bean id=&quot;viewResolver&quot;
    class=&quot;org.springframework.web.servlet.view.UrlBasedViewResolver&quot;&gt;
    &lt;property name=&quot;viewClass&quot;&gt;
        &lt;value&gt;
            org.springframework.web.servlet.view.tiles2.TilesView
        &lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;tilesConfigurer&quot; class=&quot;org.springframework.web.servlet.view.tiles2.TilesConfigurer&quot;&gt;
    &lt;property name=&quot;definitions&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;/WEB-INF/tiles-def.xml&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name=&quot;preparerFactoryClass&quot; value=&quot;org.springframework.web.servlet.view.tiles2.SpringBeanPreparerFactory&quot; /&gt;
&lt;/bean&gt;
</code></pre><p>环境：SpringJUnit4ClassRunner.class</p>
<p>######错误：IOException parsing XML document from class path resource [applicationContext.xml]; 使用classpath:applicationContext.xml找不到XML文件</p>
<p>解决：把classpath换成file<br>    file:WebRoot/WEB-INF/applicationContext.xml</p>

      
    </div>

  </div> -->

  <!-- <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Hibernate/">Hibernate</a><a href="/tags/Spring/">Spring</a>
    </span>
    

    </div>

    
  </div> -->
</article>






  

<article>

  
    
    <h3 class="article-title"><a href="/2014/02/09/2014-02-09-storm-learn/"><span>Storm学习笔记</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/09/2014-02-09-storm-learn/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-08T16:00:00.000Z">
          2014-02-09
        </time>
      </a>
    </span>
  </div>


  <!-- 

  <div class="article-content">
    <div class="entry">
      
        <p>#Storm</p>
<p>牛逼的产品就是使用起来简单，而自身内含不简单，Storm就是之一。</p>
<p><a href="http://qing.blog.sina.com.cn/2294942122/88ca09aa33002dsh.html?sudaref=www.google.com" target="_blank" rel="external">流处理框架Storm简介</a></p>
<p><a href="http://www.searchtb.com/2012/09/introduction-to-storm.html" target="_blank" rel="external">Storm简介</a></p>
<p>这些文章写的非常好，做一些学习笔记。</p>
<p>###介绍</p>
<p>分主从2种节点，3种不同的Daemon:Nimbus运行在主节点上, 从节点上运行Supervisor，每个从节点上还有一系列的worker process来运行具体任务。Daemon之间的信息交换统统是通过Zookeeper来实现。</p>
<p>Nimbus，主要负责接收客户端提交的Topology，进行相应的验证，分配任务，进而把任务相关的元信息写入Zookeeper相应目录，还负责通过Zookeeper来监控任务执行情况；</p>
<p>Supervisor，负责监听Nimbus分配的任务，根据实际情况启动/停止工作进程(Worker)；</p>
<p>Worker，运行具体处理组件逻辑的进程；</p>
<p>过程涉及到了3个相关实体：</p>
<ol>
<li><p>Worker：一个完整的Topology是由分布在多个节点上的Worker进程来执行的，每个Worker都执行（且仅执行）Topology的一个子集。</p>
</li>
<li><p>Executor：在每个Worker内部，会有多个Executor，每个executor对应一个线程。</p>
</li>
<li><p>Task：执行具体数据处理的相关实体，也就是用户实现的Spout/Blot实例。Storm中，一个executor可能会对应一个或者多个task。这就是说，系统中executor的数量是小于等于task的数量的。</p>
</li>
</ol>
<p>Storm和Hadoop的对比:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Hadoop</th>
<th style="text-align:center">Storm</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">JobTracker</td>
<td style="text-align:center">Nimbus</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">TaskTracker</td>
<td style="text-align:center">Supervisor</td>
</tr>
<tr>
<td style="text-align:center">Child</td>
<td style="text-align:center">Worker</td>
</tr>
<tr>
<td style="text-align:center">Job</td>
<td style="text-align:center">Topology</td>
</tr>
<tr>
<td style="text-align:center">Mapper/Reducer</td>
<td style="text-align:center">Spout/Bolt</td>
</tr>
</tbody>
</table>
<ol>
<li><p>Topology：Storm中运行的一个实时应用程序，因为各个组件间的消息流动形成逻辑上的一个拓扑结构。</p>
</li>
<li><p>Spout：在一个Topology中产生源数据流的组件。通常情况下Spout会从外部数据源中读取数据，然后转换为Topology内部的源数据。Spout是一个主动的角色，其接口中有个nextTuple()函数，Storm框架会不停地调用此函数，用户只要在其中生成源数据即可。</p>
</li>
<li><p>Bolt：在一个Topology中接受数据然后执行处理的组件。Bolt可以执行过滤、函数操作、合并、写数据库等任何操作。Bolt是一个被动的角色，其接口中有个execute(Tuple input)函数,在接受到消息后会调用此函数，用户可以在其中执行自己想要的操作。</p>
</li>
<li><p>Tuple：一次消息传递的基本单元。本来应该是一个Key-Value的map，但是由于各个组件间传递的Tuple的字段名称已经事先定义好，所以Tuple中只要按序填入各个value就行了，所以就是一个value list.</p>
</li>
<li><p>Stream：源源不断传递的tuple就组成了Stream。</p>
</li>
<li><p>Stream Grouping: Storm中提供若干种实用的grouping方式，包括shuffle, fields hash, all, global, none, direct和localOrShuffle等。</p>
</li>
</ol>
<p>Storm记录级容错的基本原理和事务拓扑可以参考文前的链接文章。</p>

      
    </div>

  </div> -->

  <!-- <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/bigdata/">bigdata</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Storm/">Storm</a>
    </span>
    

    </div>

    
  </div> -->
</article>






  

<article>

  
    
    <h3 class="article-title"><a href="/2014/01/01/2014-01-01-mysql-op/"><span>MySQL常见操作（不断更新）</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/01/2014-01-01-mysql-op/" rel="bookmark">
        <time class="entry-date published" datetime="2013-12-31T16:00:00.000Z">
          2014-01-01
        </time>
      </a>
    </span>
  </div>


  <!-- 

  <div class="article-content">
    <div class="entry">
      
        <p>MySQL创建GBK字符集数据库：</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">GBK: create database `test` DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci;</div><div class="line"></div><div class="line">UTF8: CREATE DATABASE `test` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;</div></pre></td></tr></table></figure>
</code></pre><p>MySQL修改root密码</p>
<ul>
<li><p>用SET PASSWORD命令</p>
<p>  <code>SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;mynewpassword&#39;);</code></p>
</li>
<li><p>用mysqladmin</p>
<p>  <code>mysqladmin -u root password &quot;mynewpassword&quot;</code></p>
</li>
</ul>
<pre><code>如果root已经设置过密码，采用如下方法

`mysqladmin -u root password oldpass &quot;mynewpassword&quot;`
</code></pre><ul>
<li><p>用UPDATE直接编辑user表</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; use mysql;</div><div class="line"></div><div class="line">mysql&gt; UPDATE user SET Password = PASSWORD(&apos;mynewpassword&apos;) WHERE user = &apos;root&apos;;</div><div class="line"></div><div class="line">mysql&gt; FLUSH PRIVILEGES;</div></pre></td></tr></table></figure>
</li>
<li><p>如果root密码丢失，可以这样：<br>  使用下面的方法，重启mysql</p>
<p>  <code>mysqld_safe --skip-grant-tables&amp;</code></p>
<p>  然后登录mysql</p>
<pre><code>mysql -u root mysql    
mysql&gt; UPDATE user SET password=PASSWORD(&quot;mynewpassword&quot;) WHERE user=&apos;root&apos;;
mysql&gt; FLUSH PRIVILEGES;
</code></pre></li>
</ul>
<p>MySQL中取Group By后的Top N问题<br>比如取group by后每个分组的Top 3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">SELECT</div><div class="line">    mac_group,</div><div class="line">    mac,</div><div class="line">    dur</div><div class="line">FROM</div><div class="line">(</div><div class="line">    SELECT</div><div class="line">        mac_group,</div><div class="line">        sum(sum_dur) as dur,</div><div class="line">        mac,</div><div class="line">        @rn := IF(@prev = mac_group and @prev_mac = mac, @rn + 1, 1) AS rn,</div><div class="line">        @prev := mac_group,</div><div class="line">        @prev_mac := mac</div><div class="line">    FROM mac_customer_stats</div><div class="line">    JOIN (SELECT @prev := NULL, @prev_mac :=NULL, @rn := 0) AS vars</div><div class="line">    where mac_group in (1,2,3)</div><div class="line">    group by mac_group, mac, day</div><div class="line">    ORDER BY mac_group, mac, dur DESC</div><div class="line">) AS T1</div><div class="line">WHERE rn &lt;= 3;</div></pre></td></tr></table></figure>

      
    </div>

  </div> -->

  <!-- <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/MySQL/">MySQL</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/mysql/">mysql</a>
    </span>
    

    </div>

    
  </div> -->
</article>






  

<article>

  
    
    <h3 class="article-title"><a href="/2013/10/07/2013-10-07-maven-multi-project/"><span>Maven管理多个项目例子?</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/10/07/2013-10-07-maven-multi-project/" rel="bookmark">
        <time class="entry-date published" datetime="2013-10-06T16:00:00.000Z">
          2013-10-07
        </time>
      </a>
    </span>
  </div>


  <!-- 

  <div class="article-content">
    <div class="entry">
      
        <p>父pom.xml</p>
<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  
        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;  

        &lt;!-- 定义公共变量 --&gt;  
        &lt;properties&gt;  
            &lt;spring.version&gt;3.1.0.RELEASE&lt;/spring.version&gt;  
            &lt;hibernate.version&gt;3.5.4-Final&lt;/hibernate.version&gt;  
        &lt;/properties&gt;  

        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  
        &lt;groupId&gt;com.xxx&lt;/groupId&gt;  
        &lt;artifactId&gt;com.xxx.platform&lt;/artifactId&gt;  
        &lt;version&gt;1.0.0&lt;/version&gt;  
        &lt;packaging&gt;pom&lt;/packaging&gt;  

        &lt;!-- 待聚合模块 --&gt;  
        &lt;modules&gt;
             &lt;module&gt;A&lt;/module&gt;
             &lt;module&gt;B&lt;/module&gt;
             &lt;module&gt;C&lt;/module&gt;

        &lt;/modules&gt;

        &lt;!-- 配置部署的远程仓库 --&gt;  
        &lt;!-- &lt;distributionManagement&gt;  
            &lt;snapshotRepository&gt;  
                &lt;id&gt;nexus-snapshots&lt;/id&gt;  
                &lt;name&gt;nexus distribution snapshot repository&lt;/name&gt;  
                &lt;url&gt;http://10.121.7.20:9090/nexus-2.1.1/content/repositories/snapshots/&lt;/url&gt;  
            &lt;/snapshotRepository&gt;  
        &lt;/distributionManagement&gt;   --&gt;

        &lt;build&gt;  
            &lt;pluginManagement&gt;  
                &lt;plugins&gt;  
                    &lt;plugin&gt;  
                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;  
                        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;  
                        &lt;version&gt;2.6&lt;/version&gt;  
                        &lt;configuration&gt;  
                            &lt;encoding&gt;UTF-8&lt;/encoding&gt;  
                        &lt;/configuration&gt;  
                    &lt;/plugin&gt;  

                    &lt;plugin&gt;  
                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;  
                        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;  
                        &lt;version&gt;2.5.1&lt;/version&gt;  
                        &lt;configuration&gt;  
                            &lt;encoding&gt;UTF-8&lt;/encoding&gt;  
                        &lt;/configuration&gt;  
                    &lt;/plugin&gt;  

                &lt;/plugins&gt;  
            &lt;/pluginManagement&gt;  

        &lt;/build&gt;  

        &lt;dependencyManagement&gt;  
            &lt;dependencies&gt;  
                &lt;!-- &lt;dependency&gt;  
                    &lt;groupId&gt;com.sun&lt;/groupId&gt;  
                    &lt;artifactId&gt;tools&lt;/artifactId&gt;  
                    &lt;version&gt;1.6.0&lt;/version&gt;  
                    &lt;scope&gt;system&lt;/scope&gt;  
                    &lt;systemPath&gt;${env.JAVA_HOME}/lib/tools.jar&lt;/systemPath&gt;  
                &lt;/dependency&gt;   --&gt;
            &lt;/dependencies&gt;  
        &lt;/dependencyManagement&gt;  
    &lt;/project&gt;  
</code></pre><p>A项目pom.xml</p>
<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;

    &lt;parent&gt;
         &lt;groupId&gt;com.xxx&lt;/groupId&gt;
         &lt;artifactId&gt;com.xxx.platform&lt;/artifactId&gt;
         &lt;version&gt;1.0.0&lt;/version&gt;
         &lt;relativePath&gt;..&lt;/relativePath&gt;
    &lt;/parent&gt;

    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;artifactId&gt;com.xxx.base&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;com.hanmingtech.base&lt;/name&gt;
    &lt;url&gt;http://maven.apache.org&lt;/url&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;
            UTF-8
        &lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.9&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
                &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;
                &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;
                &lt;version&gt;1.8.0&lt;/version&gt;
               &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;displaytag&lt;/groupId&gt;
            &lt;artifactId&gt;displaytag&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                    &lt;artifactId&gt;jcl104-over-slf4j&lt;/artifactId&gt;
                &lt;/exclusion&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
                &lt;/exclusion&gt;
                &lt;exclusion&gt;
                    &lt;!-- 使用外面的 --&gt;
                    &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;
                    &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;
                &lt;/exclusion&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;com.lowagie&lt;/groupId&gt;
                    &lt;artifactId&gt;itext&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;jstl&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.3.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;1.6&lt;/source&gt;
                    &lt;target&gt;1.6&lt;/target&gt;
                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;default-testCompile&lt;/id&gt;
                        &lt;phase&gt;test-compile&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;testCompile&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                    &lt;execution&gt;
                        &lt;id&gt;default-compile&lt;/id&gt;
                        &lt;phase&gt;compile&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;compile&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre><p><a href="http://www.cnblogs.com/holbrook/archive/2012/12/24/2830519.html" target="_blank" rel="external">http://www.cnblogs.com/holbrook/archive/2012/12/24/2830519.html</a></p>

      
    </div>

  </div> -->

  <!-- <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/java/">java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Maven/">Maven</a>
    </span>
    

    </div>

    
  </div> -->
</article>






  

<article>

  
    
    <h3 class="article-title"><a href="/2012/03/22/2012-03-22-node-js-socket-io-start/"><span>Node.js 和 Socket.io 入门教程</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2012/03/22/2012-03-22-node-js-socket-io-start/" rel="bookmark">
        <time class="entry-date published" datetime="2012-03-21T16:00:00.000Z">
          2012-03-22
        </time>
      </a>
    </span>
  </div>


  <!-- 

  <div class="article-content">
    <div class="entry">
      
        <p><strong>安装Nodejs：</strong></p>
<p>nodejs有自己的包管理工具，叫npm，通过npm管理依赖包，相当的方便。安装nodejs也是比较方便，Ubuntu上直接用：</p>
<pre><code>apt-get install nodejs
</code></pre><p><strong>Debian系统：</strong></p>
<p>Node.js在官方的Debian Sid(unstable).中已经有了，可以直接通过apt-get安装，首先检查apt-get的source文件/etc/apt/source.list中是不是已经包含</p>
<pre><code>deb http://ftp.us.debian.org/debian/ sid main
</code></pre><p>可以通过如下方式安装：</p>
<pre><code>root@host: ~ # echo deb http://ftp.us.debian.org/debian/ sid main &gt; /etc/apt/sources.list.d/sid.list
root@host: ~ # apt-get update
root@host: ~ # apt-get install nodejs
</code></pre><p>详细的安装信息这里有： <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager" target="_blank" rel="external">https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager</a></p>
<p><strong>安装Socket.io：</strong></p>
<p>开发Node.js程序当然离不开Socket.io，安装Socket.io也是比较的简单：<br>Ubuntu系统，先安装npm包：</p>
<pre><code>apt-get install npm
</code></pre><p>安装npm包后，就可以通过npm包安装Socket.io了：   </p>
<pre><code>npm  install socket.io
</code></pre><p><strong>开发入门：</strong></p>
<p>socket.io主页上有不少的例子，这里是自己整理的一个例子，服务器每隔2秒向客户端发送一条消息的例子：</p>
<p>Server: <strong>server.js</strong></p>
<pre><code>var app = require(&apos;http&apos;).createServer(handler),
    io = require(&apos;socket.io&apos;).listen(app),
    fs = require(&apos;fs&apos;);

app.listen(8080);
function handler (req, res) {
      fs.readFile(__dirname + &apos;/index.html&apos;,
      function (err, data) {
        if (err) {
          res.writeHead(500);
          return res.end(&apos;Error loading index.html&apos;);
        }
        res.writeHead(200);
        res.end(data);
      });
}

io.sockets.on(&apos;connection&apos;, function (socket) {
        io.sockets.emit(&apos;news&apos;,  &apos;welcome to nodejs&apos;);
     var tweets = setInterval(function () {
      socket.emit(&apos;news&apos;, &apos;bieber tweet ok&apos;);
      }, 2000);

      socket.on(&apos;disconnect&apos;, function () {
        clearInterval(tweets);
        io.sockets.emit(&apos;user disconnected&apos;);
      });
});
</code></pre><p>Client: <strong>index.html</strong></p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  var socket = io.connect(&apos;http://localhost/&apos;);
  socket.on(&apos;news&apos;, function (data) {
      console.log(data);
      $(&quot;#alarm&quot;).append(data).append(&apos;&lt;br/&gt;&apos;);
    socket.emit(&apos;my other event&apos;, { my: &apos;data&apos; });
  });
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=&quot;alarm&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>server.js和index.html放到同一个目录下，然后启动：</p>
<pre><code>&gt; node server.js
</code></pre><p>在浏览器上访问: <a href="http://127.0.0.1:8080/" target="_blank" rel="external">http://127.0.0.1:8080/</a> 即可看到客户端不断的有数据更新。</p>

      
    </div>

  </div> -->

  <!-- <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/nodejs/">nodejs</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Node-js/">Node.js</a><a href="/tags/Socket-io/">Socket.io</a><a href="/tags/Javascript/">Javascript</a>
    </span>
    

    </div>

    
  </div> -->
</article>







<nav class="pagination">
  
  <a href="/" class="pagination-prev">Prev</a>
  
  
</nav>

    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 fld
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>